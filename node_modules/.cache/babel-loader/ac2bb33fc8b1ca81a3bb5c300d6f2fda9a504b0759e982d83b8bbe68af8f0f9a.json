{"ast":null,"code":"import { mapState } from 'vuex';\nimport $ from 'jquery';\nexport default {\n  name: 'ImgPicture',\n  computed: {\n    ...mapState(\"QRcode\", [\"QrCodePictureArr\"])\n  },\n  methods: {\n    backPage() {\n      this.$router.back();\n    },\n    print() {\n      // const WindowPrt = window.open('', '', 'left=500px,top=500px,width=900,height=900,toolbar=0,scrollbars=0,status=0');\n      // WindowPrt.document.write($(\"#printDiv\")[0].outerHTML);\n      // WindowPrt.document.close();\n      // WindowPrt.focus();\n      // WindowPrt.print();\n      // WindowPrt.close();\n      this.customPrint($(\"#printDiv\")[0].outerHTML, {\n        beforePrint() {\n          console.log('要开始打印了');\n        },\n        afterPrint() {\n          console.log('打印窗口已关闭');\n        }\n      });\n    },\n    customPrint(content) {\n      let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      const removeOldIframe = () => {\n        const oldPrintIframe = document.getElementById('printIframe');\n        oldPrintIframe && oldPrintIframe.remove && oldPrintIframe.remove();\n      };\n      removeOldIframe();\n      const printIframe = document.createElement('iframe');\n      printIframe.id = 'printIframe';\n      document.body.appendChild(printIframe);\n      const printIframeWindow = printIframe.contentWindow;\n      printIframeWindow.document.title = options.title || '';\n      printIframeWindow.document.write(content);\n      printIframeWindow.addEventListener('beforeprint', () => {\n        options.beforePrint && options.beforePrint(printIframe);\n      });\n      printIframeWindow.addEventListener('afterprint', () => {\n        options.afterPrint && options.afterPrint(printIframe);\n        removeOldIframe();\n      });\n      setTimeout(() => {\n        printIframeWindow.focus();\n        printIframeWindow.print();\n      });\n    }\n  }\n};","map":{"version":3,"names":["mapState","$","name","computed","methods","backPage","$router","back","print","customPrint","outerHTML","beforePrint","console","log","afterPrint","content","options","arguments","length","undefined","removeOldIframe","oldPrintIframe","document","getElementById","remove","printIframe","createElement","id","body","appendChild","printIframeWindow","contentWindow","title","write","addEventListener","setTimeout","focus"],"sources":["src/components/ImgPicture.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <el-button type=\"info\" @click=\"backPage\" round>退回</el-button>\r\n            <el-button  type=\"primary\" @click=\"print\" round>打印</el-button>\r\n        </div>\r\n        <div id=\"printDiv\">\r\n            <img v-for=\"(key,index) in QrCodePictureArr\" :src=\"key.imageUrl\" :key=\"index\" width=\"250px\" :height=\"key.height\"/>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex';\r\nimport $ from 'jquery';\r\nexport default {\r\n    name: 'ImgPicture',\r\n    computed:{\r\n        ...mapState(\"QRcode\",[\"QrCodePictureArr\"])\r\n    },\r\n    methods:{\r\n        backPage(){\r\n            this.$router.back();\r\n        },\r\n        print(){\r\n            // const WindowPrt = window.open('', '', 'left=500px,top=500px,width=900,height=900,toolbar=0,scrollbars=0,status=0');\r\n            // WindowPrt.document.write($(\"#printDiv\")[0].outerHTML);\r\n            // WindowPrt.document.close();\r\n            // WindowPrt.focus();\r\n            // WindowPrt.print();\r\n            // WindowPrt.close();\r\n            this.customPrint($(\"#printDiv\")[0].outerHTML,{\r\n                beforePrint() {\r\n                    console.log('要开始打印了')\r\n                },\r\n                afterPrint() {\r\n                    console.log('打印窗口已关闭')\r\n                }\r\n            });\r\n        },\r\n\r\ncustomPrint(content, options = {}) {\r\n  const removeOldIframe = () => {\r\n    const oldPrintIframe = document.getElementById('printIframe')\r\n    oldPrintIframe && oldPrintIframe.remove && oldPrintIframe.remove()\r\n  }\r\n  removeOldIframe()\r\n  const printIframe = document.createElement('iframe')\r\n  printIframe.id = 'printIframe'\r\n  document.body.appendChild(printIframe)\r\n  const printIframeWindow = printIframe.contentWindow\r\n  printIframeWindow.document.title = options.title || ''\r\n  printIframeWindow.document.write(content)\r\n  printIframeWindow.addEventListener('beforeprint', () => {\r\n    options.beforePrint && options.beforePrint(printIframe)\r\n  })\r\n  printIframeWindow.addEventListener('afterprint', () => {\r\n    options.afterPrint && options.afterPrint(printIframe)\r\n    removeOldIframe()\r\n  })\r\n  setTimeout(() => {\r\n    printIframeWindow.focus()\r\n    printIframeWindow.print()\r\n  })\r\n}\r\n    }\r\n\r\n};\r\n</script>\r\n\r\n<style lang=\"css\" scoped>\r\n\r\n</style>"],"mappings":"AAaA,SAAAA,QAAA;AACA,OAAAC,CAAA;AACA;EACAC,IAAA;EACAC,QAAA;IACA,GAAAH,QAAA;EACA;EACAI,OAAA;IACAC,SAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;IACA;IACAC,MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACA,KAAAC,WAAA,CAAAR,CAAA,iBAAAS,SAAA;QACAC,YAAA;UACAC,OAAA,CAAAC,GAAA;QACA;QACAC,WAAA;UACAF,OAAA,CAAAC,GAAA;QACA;MACA;IACA;IAEAJ,YAAAM,OAAA;MAAA,IAAAC,OAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA;MACA,MAAAG,eAAA,GAAAA,CAAA;QACA,MAAAC,cAAA,GAAAC,QAAA,CAAAC,cAAA;QACAF,cAAA,IAAAA,cAAA,CAAAG,MAAA,IAAAH,cAAA,CAAAG,MAAA;MACA;MACAJ,eAAA;MACA,MAAAK,WAAA,GAAAH,QAAA,CAAAI,aAAA;MACAD,WAAA,CAAAE,EAAA;MACAL,QAAA,CAAAM,IAAA,CAAAC,WAAA,CAAAJ,WAAA;MACA,MAAAK,iBAAA,GAAAL,WAAA,CAAAM,aAAA;MACAD,iBAAA,CAAAR,QAAA,CAAAU,KAAA,GAAAhB,OAAA,CAAAgB,KAAA;MACAF,iBAAA,CAAAR,QAAA,CAAAW,KAAA,CAAAlB,OAAA;MACAe,iBAAA,CAAAI,gBAAA;QACAlB,OAAA,CAAAL,WAAA,IAAAK,OAAA,CAAAL,WAAA,CAAAc,WAAA;MACA;MACAK,iBAAA,CAAAI,gBAAA;QACAlB,OAAA,CAAAF,UAAA,IAAAE,OAAA,CAAAF,UAAA,CAAAW,WAAA;QACAL,eAAA;MACA;MACAe,UAAA;QACAL,iBAAA,CAAAM,KAAA;QACAN,iBAAA,CAAAtB,KAAA;MACA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}