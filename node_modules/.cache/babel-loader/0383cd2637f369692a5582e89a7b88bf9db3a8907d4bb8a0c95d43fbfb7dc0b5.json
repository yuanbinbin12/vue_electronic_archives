{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport { mapState, mapMutations, mapActions } from 'vuex';\nexport default {\n  name: 'UpLoadHeadPicture',\n  data() {\n    return {\n      ImageUrl: \"#\",\n      file: \"\",\n      title: \"\",\n      isShowAlter: false\n    };\n  },\n  computed: {\n    ...mapState(\"firstPage\", [\"userHeaderCircleUrl\", \"fileUpdateLoadPageShow\"])\n  },\n  mounted() {\n    this.ImageUrl = this.getBase64Str(this.userHeaderCircleUrl);\n  },\n  methods: {\n    ...mapMutations(\"firstPage\", [\"setFileUpdateLoadPageShow\"]),\n    ...mapActions(\"firstPage\", [\"uploadHeadPic\"]),\n    picturePreview(file, fileList) {\n      if (window.createObjectURL != undefined) {\n        this.ImageUrl = window.createObjectURL(file.raw);\n      } else if (window.URL != undefined) {\n        this.ImageUrl = window.URL.createObjectURL(file.raw);\n      } else if (window.webkitURL != undefined) {\n        this.ImageUrl = window.webkitURL.createObjectURL(file.raw);\n      }\n      this.file = file.raw;\n    },\n    cancelUpload() {\n      this.setFileUpdateLoadPageShow(false);\n    },\n    async headPictureUpLoad() {\n      if (this.file === \"\") {\n        this.title = \"请确认上传完成后再点击确认上传！\";\n        this.isShowAlter = true;\n        return;\n      }\n      await this.uploadHeadPic({\n        file: this.file,\n        vc: this\n      });\n      if (!this.isShowAlter) {\n        this.setFileUpdateLoadPageShow(false);\n      }\n    },\n    setTilte(title) {\n      this.title = title;\n      this.isShowAlter = false;\n    },\n    getBase64Str(buffArr) {\n      const src = 'data:image/png;base64,' + btoa(new Uint8Array(buffArr).reduce((data, byte) => data + String.fromCharCode(byte), ''));\n      return src;\n    }\n  }\n};","map":{"version":3,"names":["mapState","mapMutations","mapActions","name","data","ImageUrl","file","title","isShowAlter","computed","mounted","getBase64Str","userHeaderCircleUrl","methods","picturePreview","fileList","window","createObjectURL","undefined","raw","URL","webkitURL","cancelUpload","setFileUpdateLoadPageShow","headPictureUpLoad","uploadHeadPic","vc","setTilte","buffArr","src","btoa","Uint8Array","reduce","byte","String","fromCharCode"],"sources":["src/components/UpLoadHeadPicture.vue"],"sourcesContent":["<template>\r\n    <div v-show=\"fileUpdateLoadPageShow\" class=\"Masking-layer\" >\r\n        <div v-show=\"fileUpdateLoadPageShow\" style=\"position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);\">\r\n            <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"\"\r\n            :show-file-list=\"false\"\r\n            :on-change=\"picturePreview\"\r\n            :auto-upload=\"false\"\r\n            >\r\n            <img v-show=\"fileUpdateLoadPageShow\" :src=\"ImageUrl\" width=\"150\" height=\"150\" class=\"avatar\"/>\r\n            </el-upload>\r\n            <div>\r\n                <el-button\r\n                type=\"warning\"\r\n                class=\"cancelBtn\"\r\n                @click=\"cancelUpload\"\r\n                >取消上传</el-button>\r\n                <el-button\r\n                type=\"primary\"\r\n                class=\"cancelBtn\"\r\n                @click=\"headPictureUpLoad\"\r\n                >确认上传</el-button>\r\n            </div>\r\n        </div>\r\n        <div v-if=\"isShowAlter\" style=\"width: 800px; height: 40px; font-size: 14px; position: absolute; left: 50%;transform: translate(-50%,0%); \">\r\n            <el-alert\r\n                @close=\"setTilte('')\"\r\n                :title=\"title\"\r\n                type=\"error\"\r\n                >\r\n            </el-alert>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState,mapMutations,mapActions } from 'vuex';\r\nexport default {\r\n    name: 'UpLoadHeadPicture',\r\n    data() {\r\n        return {\r\n            ImageUrl:\"#\",\r\n            file:\"\",\r\n            title:\"\",\r\n            isShowAlter:false\r\n        };\r\n    },\r\n    computed:{\r\n        ...mapState(\"firstPage\",[\"userHeaderCircleUrl\",\"fileUpdateLoadPageShow\"]),\r\n    },\r\n    mounted() {\r\n        this.ImageUrl = this.getBase64Str(this.userHeaderCircleUrl);\r\n    },\r\n    methods: {\r\n        ...mapMutations(\"firstPage\",[\"setFileUpdateLoadPageShow\"]),\r\n        ...mapActions(\"firstPage\",[\"uploadHeadPic\"]),\r\n        picturePreview(file,fileList){\r\n            if(window.createObjectURL != undefined){\r\n                this.ImageUrl = window.createObjectURL(file.raw);\r\n            } else if(window.URL != undefined){\r\n                this.ImageUrl = window.URL.createObjectURL(file.raw);\r\n            } else if(window.webkitURL != undefined){\r\n                this.ImageUrl = window.webkitURL.createObjectURL(file.raw);\r\n            }\r\n            this.file = file.raw;\r\n        },\r\n        cancelUpload(){\r\n            this.setFileUpdateLoadPageShow(false);\r\n        },\r\n        async headPictureUpLoad(){\r\n            if(this.file===\"\"){\r\n                this.title = \"请确认上传完成后再点击确认上传！\";\r\n                this.isShowAlter = true;\r\n                return;\r\n            }\r\n            await this.uploadHeadPic({file:this.file,vc:this});\r\n            if(!this.isShowAlter){\r\n                this.setFileUpdateLoadPageShow(false);\r\n            }\r\n        },\r\n        setTilte(title){\r\n            this.title = title;\r\n            this.isShowAlter = false;\r\n        },\r\n        getBase64Str(buffArr){\r\n            const src =\r\n            'data:image/png;base64,' + btoa(\r\n                new Uint8Array(buffArr).reduce(\r\n                (data, byte) => data + String.fromCharCode(byte), '')\r\n            );\r\n            return src\r\n        }\r\n\r\n    },\r\n};\r\n</script>\r\n\r\n<style lang=\"css\">\r\n.Masking-layer{\r\n    position: absolute;\r\n    top:0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0, 0, 0, 0.5);\r\n}\r\n.el-alert__title{\r\n    font-size: 16px !important;\r\n    position: relative;\r\n    top: -15px;\r\n    text-align: center;\r\n}\r\n</style>"],"mappings":";;;;;;;AAqCA,SAAAA,QAAA,EAAAC,YAAA,EAAAC,UAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,IAAA;MACAC,KAAA;MACAC,WAAA;IACA;EACA;EACAC,QAAA;IACA,GAAAT,QAAA;EACA;EACAU,QAAA;IACA,KAAAL,QAAA,QAAAM,YAAA,MAAAC,mBAAA;EACA;EACAC,OAAA;IACA,GAAAZ,YAAA;IACA,GAAAC,UAAA;IACAY,eAAAR,IAAA,EAAAS,QAAA;MACA,IAAAC,MAAA,CAAAC,eAAA,IAAAC,SAAA;QACA,KAAAb,QAAA,GAAAW,MAAA,CAAAC,eAAA,CAAAX,IAAA,CAAAa,GAAA;MACA,WAAAH,MAAA,CAAAI,GAAA,IAAAF,SAAA;QACA,KAAAb,QAAA,GAAAW,MAAA,CAAAI,GAAA,CAAAH,eAAA,CAAAX,IAAA,CAAAa,GAAA;MACA,WAAAH,MAAA,CAAAK,SAAA,IAAAH,SAAA;QACA,KAAAb,QAAA,GAAAW,MAAA,CAAAK,SAAA,CAAAJ,eAAA,CAAAX,IAAA,CAAAa,GAAA;MACA;MACA,KAAAb,IAAA,GAAAA,IAAA,CAAAa,GAAA;IACA;IACAG,aAAA;MACA,KAAAC,yBAAA;IACA;IACA,MAAAC,kBAAA;MACA,SAAAlB,IAAA;QACA,KAAAC,KAAA;QACA,KAAAC,WAAA;QACA;MACA;MACA,WAAAiB,aAAA;QAAAnB,IAAA,OAAAA,IAAA;QAAAoB,EAAA;MAAA;MACA,UAAAlB,WAAA;QACA,KAAAe,yBAAA;MACA;IACA;IACAI,SAAApB,KAAA;MACA,KAAAA,KAAA,GAAAA,KAAA;MACA,KAAAC,WAAA;IACA;IACAG,aAAAiB,OAAA;MACA,MAAAC,GAAA,GACA,2BAAAC,IAAA,CACA,IAAAC,UAAA,CAAAH,OAAA,EAAAI,MAAA,CACA,CAAA5B,IAAA,EAAA6B,IAAA,KAAA7B,IAAA,GAAA8B,MAAA,CAAAC,YAAA,CAAAF,IAAA,MACA;MACA,OAAAJ,GAAA;IACA;EAEA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}