{"ast":null,"code":"import Vue from 'vue';\nimport Loading from './loading.vue';\nconst Mask = Vue.extend(Loading);\nconst toggleLoading = (el, binding) => {\n  if (binding.value) {\n    Vue.nextTick(() => {\n      // 控制loading组件显示\n      el.instance.visible = true;\n      // 插入到目标元素\n      insertDom(el, el, binding);\n    });\n  } else {\n    el.instance.visible = false;\n  }\n};\nconst insertDom = (parent, el) => {\n  // 给父元素加个定位，让loading元素定位\n  el.style.position = 'relative';\n  parent.appendChild(el.mask);\n};\nexport default {\n  bind: function (el, binding, vnode) {\n    const mask = new Mask({\n      el: document.createElement('div'),\n      data() {}\n    });\n    el.instance = mask;\n    el.mask = mask.$el;\n    el.maskStyle = {};\n    console.log(el, binding);\n    binding.value && toggleLoading(el, binding);\n  },\n  update: function (el, binding) {\n    if (binding.oldValue !== binding.value) {\n      console.log(el, binding);\n      toggleLoading(el, binding);\n    }\n  },\n  unbind: function (el, binding) {\n    el.style.position = '';\n    el.instance && el.instance.$destroy();\n  }\n};","map":{"version":3,"names":["Vue","Loading","Mask","extend","toggleLoading","el","binding","value","nextTick","instance","visible","insertDom","parent","style","position","appendChild","mask","bind","vnode","document","createElement","data","$el","maskStyle","console","log","update","oldValue","unbind","$destroy"],"sources":["C:/Users/ainizuofurong/Desktop/vue_electronic_archives/src/loadingPage/loading.js"],"sourcesContent":["import Vue from 'vue';\r\nimport Loading from './loading.vue';\r\n \r\nconst Mask = Vue.extend(Loading)\r\n \r\nconst toggleLoading = (el, binding) => {\r\n    if (binding.value) {\r\n        Vue.nextTick(() => {\r\n            // 控制loading组件显示\r\n            el.instance.visible = true\r\n            // 插入到目标元素\r\n            insertDom(el, el, binding)\r\n        })\r\n    } else {\r\n        el.instance.visible = false\r\n    }\r\n}\r\n \r\nconst insertDom = (parent, el) => {\r\n    // 给父元素加个定位，让loading元素定位\r\n    el.style.position='relative';\r\n    parent.appendChild(el.mask)\r\n}\r\n \r\nexport default {\r\n    bind: function (el, binding, vnode) {\r\n        const mask = new Mask({\r\n            el: document.createElement('div'),\r\n            data() { }\r\n        })\r\n        el.instance = mask\r\n        el.mask = mask.$el\r\n        el.maskStyle = {}\r\n        console.log(el, binding)\r\n        binding.value && toggleLoading(el, binding)\r\n    },\r\n    update: function (el, binding) {\r\n        if (binding.oldValue !== binding.value) {\r\n            console.log(el, binding)\r\n            toggleLoading(el, binding)\r\n        }\r\n    },\r\n    unbind: function (el, binding) {\r\n        el.style.position='';\r\n        el.instance && el.instance.$destroy()\r\n    }\r\n}"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,OAAO,MAAM,eAAe;AAEnC,MAAMC,IAAI,GAAGF,GAAG,CAACG,MAAM,CAACF,OAAO,CAAC;AAEhC,MAAMG,aAAa,GAAGA,CAACC,EAAE,EAAEC,OAAO,KAAK;EACnC,IAAIA,OAAO,CAACC,KAAK,EAAE;IACfP,GAAG,CAACQ,QAAQ,CAAC,MAAM;MACf;MACAH,EAAE,CAACI,QAAQ,CAACC,OAAO,GAAG,IAAI;MAC1B;MACAC,SAAS,CAACN,EAAE,EAAEA,EAAE,EAAEC,OAAO,CAAC;IAC9B,CAAC,CAAC;EACN,CAAC,MAAM;IACHD,EAAE,CAACI,QAAQ,CAACC,OAAO,GAAG,KAAK;EAC/B;AACJ,CAAC;AAED,MAAMC,SAAS,GAAGA,CAACC,MAAM,EAAEP,EAAE,KAAK;EAC9B;EACAA,EAAE,CAACQ,KAAK,CAACC,QAAQ,GAAC,UAAU;EAC5BF,MAAM,CAACG,WAAW,CAACV,EAAE,CAACW,IAAI,CAAC;AAC/B,CAAC;AAED,eAAe;EACXC,IAAI,EAAE,SAAAA,CAAUZ,EAAE,EAAEC,OAAO,EAAEY,KAAK,EAAE;IAChC,MAAMF,IAAI,GAAG,IAAId,IAAI,CAAC;MAClBG,EAAE,EAAEc,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MACjCC,IAAIA,CAAA,EAAG,CAAE;IACb,CAAC,CAAC;IACFhB,EAAE,CAACI,QAAQ,GAAGO,IAAI;IAClBX,EAAE,CAACW,IAAI,GAAGA,IAAI,CAACM,GAAG;IAClBjB,EAAE,CAACkB,SAAS,GAAG,CAAC,CAAC;IACjBC,OAAO,CAACC,GAAG,CAACpB,EAAE,EAAEC,OAAO,CAAC;IACxBA,OAAO,CAACC,KAAK,IAAIH,aAAa,CAACC,EAAE,EAAEC,OAAO,CAAC;EAC/C,CAAC;EACDoB,MAAM,EAAE,SAAAA,CAAUrB,EAAE,EAAEC,OAAO,EAAE;IAC3B,IAAIA,OAAO,CAACqB,QAAQ,KAAKrB,OAAO,CAACC,KAAK,EAAE;MACpCiB,OAAO,CAACC,GAAG,CAACpB,EAAE,EAAEC,OAAO,CAAC;MACxBF,aAAa,CAACC,EAAE,EAAEC,OAAO,CAAC;IAC9B;EACJ,CAAC;EACDsB,MAAM,EAAE,SAAAA,CAAUvB,EAAE,EAAEC,OAAO,EAAE;IAC3BD,EAAE,CAACQ,KAAK,CAACC,QAAQ,GAAC,EAAE;IACpBT,EAAE,CAACI,QAAQ,IAAIJ,EAAE,CAACI,QAAQ,CAACoB,QAAQ,CAAC,CAAC;EACzC;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}